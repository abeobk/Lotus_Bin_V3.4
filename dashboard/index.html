<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production Dashboard</title>
    <link rel="preload" href="./css/font-awesome.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="./css/font-awesome.min.css">
    </noscript>
    <link rel="stylesheet" href="./css/styles.css">
</head>

<body>
    <!------------------------>
    <!-- Top Navigation Bar -->
    <!------------------------>
    <nav class="top-navbar">
        <div class="nav-left">
            <button class="nav-btn" id="settingNavBtn" title="Settings"
                onclick="sendMessageToCSharp({type:'setting_button_clicked'})">
                <i class="fas fa-cog"></i>
            </button>
        </div>
        <div class="nav-right">
            <button class="control-btn active" data-section="table" title="Show History">
                <i class="fas fa-table"></i>
            </button>
            <button class="control-btn" data-section="logs" title="Show Logs">
                <i class="fas fa-list-alt"></i>
            </button>
            <button class="control-btn" data-section="plc" title="Show PLC">
                <i class="fas fa-microchip"></i>
            </button>
            <button class="control-btn" data-section="charts" title="Show Statistics">
                <i class="fas fa-chart-pie"></i>
            </button>
            <button class="control-btn theme-toggle" id="themeToggle" title="Toggle Theme">
                <i class="fas fa-adjust"></i>
            </button>
        </div>
    </nav>

    <!------------------------>
    <!-- Dash board         -->
    <!------------------------>
    <div class="dashboard">
        <!-- Cycle Info Section -->
        <div class="cycle-info">
            <!-- Info Cards -->
            <div class="info-cards-row">
                <div class="info-card">
                    <div class="info-label">Model</div>
                    <div class="info-value" id="currentModel">XB-2024-A</div>
                </div>
                <div class="info-card">
                    <div class="info-label">BODY NO / VIN NO</div>
                    <div class="info-value" id="currentBodyNo">B240823-001</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Seq No</div>
                    <div class="info-value" id="currentSeqNo">SEQ-0847</div>
                </div>
            </div>

            <!-- Result Table -->
            <div id="resultTables" class="result-container">
                <div class="result-table-wrapper">
                    <h3>Result</h3>
                    <div class="table-container">
                        <table class="result-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th><span class="x-badge">X</span></th>
                                    <th><span class="y-badge">Y</span></th>
                                    <th><span class="z-badge">Z</span></th>
                                    <th><span class="rx-badge">Rx</span></th>
                                    <th><span class="ry-badge">Ry</span></th>
                                    <th><span class="rz-badge">Rz</span></th>
                                    <th><span class="fit-badge">Fit</span></th>
                                    <th><span class="ovl-badge">Ovl</span></th>
                                </tr>
                            </thead>
                            <tbody id="resultData">
                                <tr>
                                    <td><span class="status-badge ok">BODY</span></td>
                                    <td class="ng-text">10.00</td>
                                    <td>0.00</td>
                                    <td>0.00</td>
                                    <td>0.00</td>
                                    <td>0.00</td>
                                    <td>0.00</td>
                                    <td>0.00</td>
                                    <td>1.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!------------------------>
        <!-- MAIN SETION        -->
        <!------------------------>

        <main class="main-content">
            <!-- Production history -->
            <section class="content-section active" id="table-section">
                <div class="section-header">
                    <div class="section-header-row">
                        <h2>Production History</h2>
                        <div class="table-filters">
                            <button class="table-filter" id="ngFilterToggle" data-filter="ng-only" title="Show NG Only">
                                <i class="fas fa-exclamation-triangle"></i> NG Only
                            </button>
                        </div>
                    </div>
                </div>

                <!-- OK/NG counters -->
                <div class="stats-section">
                    <div class="stat-card ok-stat">
                        <div class="stat-header">
                            <div class="stat-label">OK</div>
                            <div class="stat-percentage" id="okPercentage">94.2%</div>
                        </div>
                        <div class="stat-number" id="okCount">847</div>
                    </div>
                    <div class="stat-card ng-stat">
                        <div class="stat-header">
                            <div class="stat-label">NG</div>
                            <div class="stat-percentage" id="ngPercentage">5.8%</div>
                        </div>
                        <div class="stat-number" id="ngCount">52</div>
                    </div>
                </div>

                <!-- Data Table -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="display: none;">ID</th>
                                <th>Time</th>
                                <th>Model</th>
                                <th>BodyNo</th>
                                <th>Seq No</th>
                                <th>Result</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Table rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Logs Section -->
            <section class="content-section" id="logs-section">
                <div class="section-header">
                    <div class="section-header-row">
                        <h2>System Logs</h2>
                        <div class="log-filters">
                            <button class="log-filter" data-level="DEBUG" title="Show all logs"> <i
                                    class="fas fa-bug"></i></button>
                            <button class="log-filter active" data-level="LOG" title="Show non-debug logs"> <i
                                    class="fas fa-list"></i></button>
                            <button class="log-filter" data-level="WARN" title="Show warning & error logs"><i
                                    class="fas fa-exclamation-triangle"></i></button>
                            <button class="log-filter" data-level="ERROR" title="Show only error logs"><i
                                    class="fas fa-times-circle"></i></button>
                        </div>
                    </div>
                </div>
                <div class="logs-container" id="logsContainer">
                    <!-- Log entries will be populated by JavaScript -->
                    <div id="logsContentArea"></div>
                </div>
            </section>

            <!-- PLC Map Section -->
            <section class="content-section" id="plc-section">
                <div class="section-header">
                    <div class="section-header-row">
                        <h2>PLC I/O Map</h2>
                    </div>
                </div>
                <div class="plc-container">
                    <div class="plc-column">
                        <div class="plc-header">
                            <span class="io-badge read-badge" id="readBadge">R</span>
                            INPUT
                        </div>
                        <div class="plc-items" id="inputItems">
                            <!-- Input items will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="plc-column">
                        <div class="plc-header">
                            <span class="io-badge write-badge" id="writeBadge">W</span>
                            OUTPUT
                        </div>
                        <div class="plc-items" id="outputItems">
                            <!-- Output items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="content-section" id="charts-section">
                <div class="section-header">
                    <div class="section-header-row">
                        <h2>Analytics</h2>
                    </div>
                </div>
                <div class="analytics-container vertical-charts">
                    <div class="analytics-card" id="hourly-chart">
                        <div class="chart-header h3">
                            <h3>Hourly Production (24h)</h3>
                        </div>
                        <div class="hourly-chart-container">
                            <canvas id="hourlyChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Mini Log (shown when logs section is not active) -->
        <div class="mini-log" id="miniLog">
            <!-- <span class="log-timestamp">2025-08-24 10:30:00</span> -->
            <span class="log-level log-INFO">INFO</span>
            <span class="log-message">System ready - Production cycle active</span>
            <div class="mini-log-counters">
                <span class="mini-counter" id="miniLogTotal" title="Total log entries">
                    <i class="fas fa-list"></i>
                    <span class="counter-value">0</span>
                </span>
                <span class="mini-counter mini-counter-warn" id="miniWarnCounter" title="Warning log entries">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span class="counter-value">0</span>
                </span>
                <span class="mini-counter mini-counter-error" id="miniErrorCounter" title="Error log entries">
                    <i class="fas fa-times-circle"></i>
                    <span class="counter-value">0</span>
                </span>
            </div>
        </div>
    </div>

    <script src="./script/clusterize.min.js" defer></script>
    <script src="./script/script.js" defer></script>
    <script src="./script/api.js" defer></script>
</body>

</html>